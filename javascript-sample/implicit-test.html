<!-- Include Bootstrap from a CDN (Content Delivery Network) -->
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

<!DOCTYPE html>
<html lang="en">
    <HEAD>
        <script src="https://cdn.rawgit.com/GluuFederation/openid-implicit-client/master/openidconnect.js">
        </script>

        <script>
            var clientInfo = {
                client_id : '@!87B2.799A.2DD5.2A83!0001!0C26.B6FD!0008!EDAA.E9FD',
                redirect_uri : 'https://pkg-deb2.gluu.org/identity/openid-implicit-client/javascript-sample/login-callback.html'
            };

            var providerInfo = OIDC.discover('https://pkg-deb2.gluu.org');
            OIDC.setClientInfo( clientInfo );
            OIDC.setProviderInfo( providerInfo );
            OIDC.storeInfo(providerInfo, clientInfo);
            loginRequest = OIDC.generateLoginRequest({scope : 'openid profile email',
                                      response_type : 'token id_token'});
            // Remove State and Nonce from previous session
            sessionStorage.removeItem('state');
            sessionStorage.removeItem('nonce');
        </script>

    </HEAD>

    <BODY>
      <div class="container" style="margin-bottom: 50px;">
        <h1>Implicit Flow Test Login Page</h1>
        <br>
        <b>clientInfo</b>
        <div id="clientInfo">
          clientInfo not found
        </div>
        <script type="text/javascript">
        document.getElementById('clientInfo').innerHTML = JSONObjToHTMLTable(clientInfo);
        </script>
        <b>loginRequest</b>
        <div id="loginRequest">
          loginRequest not generated yet
        </div>
        <br>
        <div class="buttons">
          <button onClick="document.getElementById('loginRequest').innerHTML =
          JSONObjToHTMLTable(loginRequest);"
          type="button" class="btn btn-primary" >Generate Login Request</button>
          <button onClick="OIDC.login( {scope : 'openid profile email',
          response_type : 'token id_token'} );"
          type="button" class="btn btn-success" >Authenticate</button>
        </div>
      </div>
    </BODY>

</HTML>
